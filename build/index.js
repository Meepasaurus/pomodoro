"use strict";var Timer=function(e,s){var t=$("#slice"),i=$(".counter").find("p"),n=$("#title"),a=$("#pulse"),o=$("#session-minutes-tens"),r=$("#session-minutes-ones"),c=$("#session-seconds-tens"),u=$("#session-seconds-ones"),d=document.getElementById("notification"),l="white",p="#263238",g="session",h="true",k=e,f=s,m=0,b=0,x=!1,v="",D=!1;return k>5999&&(k=5999),f>5999&&(f=5999),{updateCounter:function(){var e="",s="",t=Math.floor(b/60),n=b%60;n<10&&(e="0"),t<10&&(s="0"),i.text(s+t+":"+e+n)},updateClock:function(){var e=b/m*360;360===e&&("session"===g?n.text("Session"):n.text("Break")),0===e?t.css({"background-color":"#263238"}):e<=180?(e+=90,t.css({"background-color":l,"background-image":"linear-gradient("+e+"deg, transparent 50%, "+p+" 50%),linear-gradient(90deg, "+p+" 50%, transparent 50%)"})):e<360?(e-=90,t.css({"background-color":l,"background-image":"linear-gradient("+e+"deg, transparent 50%, white 50%),linear-gradient(90deg, "+p+" 50%, transparent 50%)"})):t.css({"background-image":"none","background-color":l}),this.updateCounter(),0===b?(this.startStop(),console.log(g+" time's up."),a.addClass("pulse"),window.setTimeout(function(){$("#pulse").removeClass("pulse")},1e3),"session"===g?(this.playAudio(),g="break",b=f,m=f,this.startStop()):(this.playAudio(),g="session",b=k,m=k,this.startStop())):(b--,console.log(b+1+" seconds remaining."))},startStop:function(){x=!0,D?(window.clearInterval(v),D=!1):(v=window.setInterval(this.updateClock.bind(this),1e3),D=!0)},playAudio:function(){h&&(d.pause(),d.currentTime=0,d.play())},setAudio:function(e){switch(e){case"off":h=!1;break;case"chime":d.src="audio/chime.mp3",h=!0;break;case"bleep":d.src="audio/bleep.mp3",h=!0;break;case"moo":d.src="audio/moo.mp3",h=!0}},setSettingsTimer:function(e,s){console.log(x),e=e.toString();var t=e.slice(0,1),i=Number(e.slice(1)),n=0,a=0;if("session"===s?(n=this.parseFourDigits(k),a=k):(n=this.parseFourDigits(f),a=f),"+"===t)switch(i){case 1:a=9===n[3]?a-=9:a+=1;break;case 10:a=5===n[2]?a-=50:a+=10;break;case 60:a=9===n[1]?a-=540:a+=60;break;case 600:a=9===n[0]?a-=5400:a+=600}else switch(i){case 1:a=0===n[3]?a+=9:a-=1;break;case 10:a=0===n[2]?a+=50:a-=10;break;case 60:a=0===n[1]?a+=540:a-=60;break;case 600:a=0===n[0]?a+=5400:a-=600}"session"===s?(k=a,this.setParsedSessionDigits(this.parseFourDigits(k))):(f=a,this.setParsedBreakDigits(this.parseFourDigits(f))),x||(b=k,m=k,0===m?this.updateCounter():this.updateClock())},setParsedSessionDigits:function(e){o.text(e[0]),r.text(e[1]),c.text(e[2]),u.text(e[3])},setParsedBreakDigits:function(e){$("#break-minutes-tens").text(e[0]),$("#break-minutes-ones").text(e[1]),$("#break-seconds-tens").text(e[2]),$("#break-seconds-ones").text(e[3])},parseFourDigits:function(e){var s=0,t=0,i=0,n=0;n=Math.floor(e/60/10),i=Math.floor(e/60%10);var a=e-(600*n+60*i);return t=Math.floor(a/10),s=Math.floor(a%10),[n,i,t,s]},init:function(){this.setAudio($("input[name=sfx]:checked","#sfx").val()),this.setParsedSessionDigits(this.parseFourDigits(k)),this.setParsedBreakDigits(this.parseFourDigits(f)),b=k,m=k,this.updateClock()}}};$(document).ready(function(){var e=new Timer(3,5);e.init(),$(".btn-clock").on("click",function(s){s.preventDefault(),e.startStop()}),$(".edit-timer").on("click",function(s){s.preventDefault(),e.setSettingsTimer($(this).data("edit"),$(this).data("type"))}),$("#sfx input").on("change",function(){e.setAudio($("input[name=sfx]:checked","#sfx").val())})});